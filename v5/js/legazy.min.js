function dragdrop(e){e.drag=!1;e.mousePosition={x:0,y:0};e.ref={x:0,y:0};e.timer=null;e.snapThreshold=40;e.clickCancel=!1;var t="ontouchstart"in window,n=("onorientationchange"in window?"orientationchange":"resize",t?"touchstart":"mousedown"),r=t?"touchmove":"mousemove",o=t?"touchend":"mouseup";ueUtils.addEvent(e,n,function(t){e.drag=!0;e.clickCancel=!1;e.mousePosition=ueUtils.getMousePosition(t);e.ref.x=e.offsetLeft;e.ref.y=e.offsetTop;e.timer=setTimeout(function(){e.clickCancel=!0;fireEvent(e,"tap")},800);ueUtils.preventDefault(t)},!1);ueUtils.addEvent(e.parentNode,r,function(t){if(e.drag){e.clickCancel=!0;var n={},r={};n=ueUtils.getMousePosition(t);r.x=n.x-e.mousePosition.x;r.y=n.y-e.mousePosition.y;if(e.timer){clearInterval(e.timer);e.timer=null}}},!1);ueUtils.addEvent(document,o,function(t){if(e.drag){e.drag=!1;var n="",r={};pos=ueUtils.getMousePosition(t);r.x=pos.x-e.mousePosition.x;r.y=pos.y-e.mousePosition.y;Math.abs(r.x)>e.snapThreshold&&(n=pos.x>e.mousePosition.x?"swiperight":"swipeleft");Math.abs(r.y)>e.snapThreshold&&(n=pos.y>e.mousePosition.y?"swipebottom":"swipetop");n&&ueUtils.fireEvent(e,n);if(e.timer){clearInterval(e.timer);e.timer=null}}},!1)}function otras_redes(){function e(){if(a){clearTimeout(a);a=null}}function t(){e();o.style.display="block"}function n(){e();a=setTimeout(function(){o.style.display="none"},50)}if(/msie/i.test(navigator.userAgent))try{var r=ueUtils.getElementsByClass("compartir")[0],o=ueUtils.getElementsByClass("otras-redes")[0],a=null;o.style.display="none";r.onmouseover=t;r.onmouseout=n}catch(i){}}function ueDebate(e){if(e){var t=this,n="string"==typeof e.site&&e.site,r="string"==typeof e.url&&e.url,o="number"==typeof e.oracleId&&e.oracleId,a=!("string"!=typeof e.formId||!document.getElementById(e.formId))&&document.getElementById(e.formId),i=!("string"!=typeof e.btEnviar||!document.getElementById(e.btEnviar))&&document.getElementById(e.btEnviar),s=!("string"!=typeof e.errorId||!document.getElementById(e.errorId))&&document.getElementById(e.errorId),u="string"==typeof e.redirect&&e.redirect,c=!1;0!=r&&0!=n&&0!=o&&0!=a&&0!=i&&(this.showErrorMessages=function(e){if(s){jQuery(s).removeClass("n-visible");jQuery(s).html('<div class="alert-box warning"><p>'+e+'</p><span class="close"></span></div>');var t=jQuery(s).find(".close");t.on("click",function(){jQuery(s).html("");jQuery(s).addClass("n-visible")})}},this.sendVotes=function(e){var r={};r.site=n;r.id=o.toString();r.preguntas=[];s&&(s.innerHTML="");var i=parseInt(document.getElementById("anio_debate_"+o).value,10),u=parseInt(document.getElementById("mes_debate_"+o).value,10);r.anio=i;r.mes=u;var c=!0;fields=a.getElementsByTagName("fieldset");for(var l=0,d=fields.length;l<d;++l){var f=!0,m=fields[l].getElementsByTagName("input"),p=fields[l].getElementsByTagName("select");if(p.length>0){for(var v=0,g=p[0].options.length;v<g;++v)if(1==p[0].options[v].selected){var h=p[0].options[v].value.split(",");r.preguntas.push({id:h[0],respuesta_id:h[1]});f=!1}}else if(m.length>0)for(var v=0,g=m.length;v<g;++v)if(("checkbox"==m[v].type||"radio"==m[v].type)&&1==m[v].checked){var h=m[v].value.split(",");r.preguntas.push({id:h[0],respuesta_id:h[1]});f=!1}fields[l].className=f?"error":"";f&&(c=!1)}c?this.sendData(r):t.showErrorMessages("Error rellenando votación, revisa los campos")},this.sendData=function(e){if(!c){c=!0;var n=r+"?jsonDebate="+JSON.stringify(e);ueAjax.getRequest(n,"json",function(e){c=!1;0==parseInt(e.codigo)?t.showErrorMessages(e.resultado):u&&(window.location.href=u)})}},ueUtils.addEvent(i,"click",function(){t.sendVotes(a)},!1))}}function cargar_resultados_debates(){if("undefined"!=typeof debateTotalResults&&void 0!=debateTotalResults.resultados){var e=!!document.getElementById("numVotosTotalesEncuesta")&&document.getElementById("numVotosTotalesEncuesta");e&&(e.innerHTML=debateTotalResults.total_votos?debateTotalResults.total_votos:"");for(var t=0,n=debateTotalResults.resultados.length;t<n;++t){for(var r=debateTotalResults.resultados[t],o=[],a=0,i=r.respuestas.length;a<i;++a)try{var s=r.respuestas[a],u=100*s.votos/r.total_votos;o[a]=u.toFixed(2)}catch(c){}for(var a=0,i=r.respuestas.length;a<i;++a)try{var l=document.getElementById("poll-percentage_"+r.respuestas[a].id),d=document.getElementById("bar-percentage_"+r.respuestas[a].id);d.setAttribute("style","width:"+o[a]+"%");l.innerHTML=o[a]+" %"}catch(c){}}}}var ueAjax={init:function(){var e=null;if(window.XMLHttpRequest)e=new XMLHttpRequest;else if(window.ActiveXObject)try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}return e},parseJSON:function(jsonString){var json=null;try{json=window.JSON?JSON.parse(jsonString):eval("("+jsonString+")")}catch(e){}return json},getRandomParam:function(){var e=(new Date).getTime();return"rand"+e+"="+e},getRequest:function(e,t,n){var r=!(!n||"function"!=typeof n),o=null,a=null;e+=(e.indexOf("?")==-1?"?":"&")+ueAjax.getRandomParam();o=ueAjax.init();if(o){o.onreadystatechange=function(){4==o.readyState&&200==parseInt(o.status)&&n&&n(ueAjax.response(o,t))};o.open("GET",encodeURI(e),r);o.send("");a=r?a:ueAjax.response(o,t);return a}},postRequest:function(e,t,n,r){var o=!(!r||"function"!=typeof r),a=null,i=null,s="";e+=(e.indexOf("?")==-1?"?":"&")+ueAjax.getRandomParam();a=ueAjax.init();if(a){a.onreadystatechange=function(){4==a.readyState&&200==parseInt(a.status)&&r&&r(ueAjax.response(a,n))};if("string"==typeof t)s=t;else if("object"==typeof t){var u=[];ueAjax.serializeJSON(u,"",t);s=u.join("&");u=null}a.open("POST",encodeURI(e),o);a.setRequestHeader("Content-Type","application/x-www-form-urlencoded");a.send(s);i=o?i:ueAjax.response(a,n);return i}},serializeJSON:function(e,t,n){if("object"!=typeof n)e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));else if("object"==typeof n){obj=n;for(p in obj)ueAjax.serializeJSON(e,""==t?p:t+"["+p+"]",obj[p])}},getJSONP:function(e,t){var n=document.createElement("script");n.src=e;n.onload=n.onreadystatechange=function(){if(!(n.loaded||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState)){this.onload=this.onreadystatechange=null;t&&t();this.parentNode.removeChild(this)}};var r=document.getElementsByTagName("head")[0]||document.body;r.appendChild(n)},response:function(e,t){var n=null;switch(t){case"text":case"html":n=e.responseText;break;case"xml":n=e.responseXML;break;case"json":n=ueAjax.parseJSON(e.responseText);break;default:n=e.responseXML}return n}},ueUtils={insertAfter:function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},getElementsByClass:function(e,t,n){null==t&&(t=document);null==n&&(n="*");for(var r=[],o=t.getElementsByTagName(n),a=" "+e+" ",i=0,s=0,u=o.length;i<u;++i){var c=" "+o[i].className+" ";c.indexOf(a)!=-1&&(r[s++]=o[i])}return r},addClass:function(e,t){"string"==typeof e&&(e=document.getElementById(e));if(e){var n=new RegExp("(^|\\s)"+t+"(\\s|$)");n.test(e.className)||(e.className+=" "+t)}},removeClass:function(e,t){"string"==typeof e&&(e=document.getElementById(e));if(e){var n=new RegExp("(^|\\s)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}},toggleClass:function(e,t){"string"==typeof e&&(e=document.getElementById(e));if(e){var n=new RegExp("(^|\\s)"+t+"(\\s|$)");if(n.test(e.className)){e.className=e.className.replace(n," ");return!1}e.className+=" "+t;return!0}},addEvent:function(e,t,n,r){if("function"!=typeof n)return!1;if(e.addEventListener){e.addEventListener(t,n,r);return!0}if(e.attachEvent){e.attachEvent("on"+t,function(t){n.call(e,t)});return!0}return!1},removeEvent:function(e,t,n,r){if("function"!=typeof n)return!1;if(e.removeEventListener){e.removeEventListener(t,n,r);return!0}if(e.detachEvent){e.detachEvent("on"+t,n);return!0}return!1},fireEvent:function(e,t){if(!e)return!1;if(document.createEvent){var n=document.createEvent("CustomEvent");n.initCustomEvent(t,!0,!0,{});e.dispatchEvent&&e.dispatchEvent(n);return!0}if(document.createEventObject){var n=document.createEventObject();e.fireEvent&&e.fireEvent("on"+t,n);return!0}return!1},getMousePosition:function(e){e=e||window.event;var t={x:0,y:0};if(e.pageX||e.pageY){t.x=e.pageX;t.y=e.pageY}else if(e.clientX||e.clientY){var n=document.documentElement,r=document.body;t.x=e.clientX+(n.scrollLeft||r.scrollLeft)-(n.clientLeft||0);t.y=e.clientY+(n.scrollTop||r.scrollTop)-(n.clientTop||0)}else if(e.changedTouches){t.x=e.changedTouches[0].pageX;t.y=e.changedTouches[0].pageY}return t},preventDefault:function(e){"function"==typeof e.preventDefault&&e.cancelable?e.preventDefault():e.returnValue=!1},readCookie:function(e){for(var t=e+"=",n=document.cookie.split(";"),r=n.length,o=0;o<r;++o){for(var a=n[o];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return null},createCookie:function(e,t,n){if(n){var r=new Date;r.setTime(r.getTime()+24*n*3600*1e3);var o="; expires="+r.toGMTString()}else var o="";var a=location.hostname.match(/[a-zA-Z0-9-]+\.[a-zA-Z]{2,6}?$/);document.cookie=e+"="+t+o+"; path=/"+(a[0]?";domain="+a[0]:"")},removeCookie:function(e){document.cookie=e+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/"},stripTags:function(e){var t=/(<([^>]+)>)/gi;return e.replace(t,"")},strToXml:function(e){var t=null;if(window.DOMParser){parser=new DOMParser;t=parser.parseFromString(e,"text/xml")}else{t=new ActiveXObject("Microsoft.XMLDOM");t.async=!1;t.loadXML(e)}return t}};ueUtils.font={size:5,minSize:3,maxSize:7,inc:function(){if(ueUtils.font.size<ueUtils.font.maxSize){ueUtils.font.size++;var e=document.getElementById("tamano");e&&(e.className="tamano tamanoletra"+ueUtils.font.size)}},dec:function(){if(ueUtils.font.size>ueUtils.font.minSize){ueUtils.font.size--;var e=document.getElementById("tamano");e&&(e.className="tamano tamanoletra"+ueUtils.font.size)}}};String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var t=0,n=this.length;t<n;++t)if(this[t]===e)return t;return-1});ueUtils.serialize=function(e){var t,n,r,o="",a="",i=0,s=function(e){var t=0,n=0,r=e.length,o="";for(n=0;n<r;n++){o=e.charCodeAt(n);t+=o<128?1:o<2048?2:3}return t},u=function(e){var t,n,r,o,a=typeof e;if("object"===a&&!e)return"null";if("object"===a){if(!e.constructor)return"object";r=e.constructor.toString();t=r.match(/(\w+)\(/);t&&(r=t[1].toLowerCase());o=["boolean","number","string","array"];for(n in o)if(r==o[n]){a=o[n];break}}return a},c=u(e);switch(c){case"function":t="";break;case"boolean":t="b:"+(e?"1":"0");break;case"number":t=(Math.round(e)==e?"i":"d")+":"+e;break;case"string":t="s:"+s(e)+':"'+e+'"';break;case"array":case"object":t="a";for(n in e)if(e.hasOwnProperty(n)){o=u(e[n]);if("function"===o)continue;r=n.match(/^[0-9]+$/)?parseInt(n,10):n;a+=this.serialize(r)+this.serialize(e[n]);i++}t+=":"+i+":{"+a+"}";break;case"undefined":default:t="N"}"object"!==c&&"array"!==c&&(t+=";");return t};ueUtils.unserialize=function(e){var t=this,n=function(e){var t=e.charCodeAt(0);return t<128?0:t<2048?1:2},r=function(e,n,r,o){throw new t.window[e](n,r,o)},o=function(e,t,n){for(var o=2,a=[],i=e.slice(t,t+1);i!=n;){o+t>e.length&&r("Error","Invalid");a.push(i);i=e.slice(t+(o-1),t+o);o+=1}return[a.length,a.join("")]},a=function(e,t,r){var o,a,i;i=[];for(o=0;o<r;o++){a=e.slice(t+(o-1),t+o);i.push(a);r-=n(a)}return[i.length,i.join("")]},i=function(e,t){var n,s,u,c,l,d,f,m,p,v,g,h,y,E,b,x=0,w=function(e){return e};t||(t=0);n=e.slice(t,t+1).toLowerCase();s=t+2;switch(n){case"i":w=function(e){return parseInt(e,10)};d=o(e,s,";");x=d[0];l=d[1];s+=x+1;break;case"b":w=function(e){return 0!==parseInt(e,10)};d=o(e,s,";");x=d[0];l=d[1];s+=x+1;break;case"d":w=function(e){return parseFloat(e)};d=o(e,s,";");x=d[0];l=d[1];s+=x+1;break;case"n":l=null;break;case"s":f=o(e,s,":");x=f[0];m=f[1];s+=x+2;d=a(e,s+1,parseInt(m,10));x=d[0];l=d[1];s+=x+2;x!=parseInt(m,10)&&x!=l.length&&r("SyntaxError","String length mismatch");break;case"a":l={};u=o(e,s,":");x=u[0];c=u[1];s+=x+2;for(p=0;p<parseInt(c,10);p++){g=i(e,s);h=g[1];v=g[2];s+=h;y=i(e,s);E=y[1];b=y[2];s+=E;l[v]=b}s+=1;break;default:r("SyntaxError","Unknown / Unhandled data type(s): "+n)}return[n,s-t,w(l)]};return i(e+"",0)[2]};var ueHeader={cookieName:"UE_pref",editions:["n","a","mx"],devices:["e","m"],indexOf:function(e,t){if(e.indexOf)return e.indexOf(t)!=-1;for(var n=0,r=e.length;n<r;++n)if(e[n]==t)return!0;return!1},readPreferences:function(){try{var e=ueUtils.readCookie(ueHeader.cookieName);if(!e)return!1;e=JSON.parse(decodeURIComponent(e));return e}catch(t){return!1}},readPreferencesOLD:function(){try{var e=ueUtils.readCookie(ueHeader.cookieName);if(!e)return!1;e=ueUtils.unserialize(decodeURIComponent(e));cookieA={};cookieA.v=e[0];cookieA.d=e[1];cookieA.u=e[2];return cookieA}catch(t){return!1}},savePreferences:function(e){ueUtils.createCookie(ueHeader.cookieName,encodeURIComponent(JSON.stringify(e)),1460)},savePreferencesOLD:function(e){ueUtils.createCookie(ueHeader.cookieName,encodeURIComponent(ueUtils.serialize({0:e.v,1:e.d,2:e.u})),1460)},changeEdition:function(e){if(!e||!ueHeader.indexOf(ueHeader.editions,e))return!1;var t=ueHeader.readPreferences();if(t){if(t.v==e)return!1;t.v=e;ueHeader.savePreferences(t)}else{t=ueHeader.readPreferencesOLD();if(t){if(t.v==e)return!1;t.v=e;ueHeader.savePreferencesOLD(t)}}location.href=location.pathname},changeDevice:function(e){if(!e||!ueHeader.indexOf(ueHeader.devices,e))return!1;var t=ueHeader.readPreferences();if(t){if(t.d==e)return!1;t.d=e;ueHeader.savePreferences(t)}else{t=ueHeader.readPreferencesOLD();if(t){if(t.d==e)return!1;t.d=e;ueHeader.savePreferencesOLD(t)}}"e"==e?location.href=location.pathname+"?intcmp=BACK1":location.href=location.pathname+"?intcmp=BACK2"},changeUserOption:function(){var e=ueHeader.readPreferences();if(e){e.u=1;ueHeader.savePreferences(e);document.getElementById("popup-cambio-version").style.display="none"}else{e=ueHeader.readPreferencesOLD();if(e){e.u=1;ueHeader.savePreferencesOLD(e);document.getElementById("popup-cambio-version").style.display="none"}else location.href=location.pathname}},search:function(){var e=document.getElementById("buscar");e&&(e.className.indexOf("open")==-1||""==e.value?ueUtils.toggleClass(e,"open"):e.form.submit())}};ueUtils.addEvent(window,"load",function(){for(var e=document.getElementsByTagName("summary"),t=0,n=e.length;t<n;++t)"details"==e[t].parentNode.tagName.toLowerCase()&&(e[t].onclick=function(){this.parentNode.className="open"==this.parentNode.className?"close":"open"})},!1);ueUtils.loadEcommerce=function(e){if("object"==typeof e&&"string"==typeof e.idCont){var t=document.getElementById(e.idCont);if(t){var n={portal:e.portal,seccion:e.seccion,idItem:e.idItem,tags:e.tags},r=e.url+encodeURIComponent(JSON.stringify(n)),o=ueAjax.getRequest(r,"text");t.innerHTML=o}}};var ueMenu=window.ueMenu||function(){function e(){ueUtils.removeClass("desplegable","open")}return{toggle:function(t){ueUtils.toggleClass("desplegable","open")?ueUtils.addEvent(document,"click",e,!1):ueUtils.removeEvent(document,"click",e,!1);t.stopPropagation?t.stopPropagation():t.cancelBubble=!0;return!1}}}();