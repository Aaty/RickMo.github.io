function jsCallbackReady(e){window.kdp=document.getElementById(e)}function playKalturaPlayer(e,t,n,i,a,r){if(ueMundoTv)return ueMundoTv.playVideo(e,n,i,r);var l="string"==typeof t&&document.getElementById(t)?document.getElementById(t):window.kdp;if(l&&l.sendNotification){var o=new Object;o.entryId=e,o.title=i,o.description=r,l.sendNotification("changeMedia",o)}}function kalturaPlayer(e){if("object"!=typeof e)return!1;if("string"!=typeof e.videoId||""==e.videoId)return!1;if("number"!=typeof e.partnerId||""==e.partnerId)return!1;if("string"!=typeof e.uiconfId||""==e.uiconfId)return!1;var t=e.videoId,n=e.partnerId,i=e.uiconfId,a="string"==typeof e.seccion?e.seccion:"",r="string"==typeof e.tema?e.tema:"",l="string"==typeof e.portal?e.portal:"",o="boolean"==typeof e.responsive&&e.responsive,d="number"==typeof e.ancho?e.ancho:300,s="number"==typeof e.alto?e.alto:Math.ceil(9*d/16+30),u="boolean"==typeof e.publi&&""!=a&&""!=l&&e.publi,c="string"==typeof e.title?e.title:"",p="string"==typeof e.imagen?e.imagen:"http://v.uecdn.es/p/"+n+"/thumbnail/entry_id/"+t+"/width/"+d+"/height/"+s+"/type/3/bgcolor/000000",m="string"==typeof e.objId?e.objId:"player"+Math.ceil(1e5*Math.random()),g="boolean"==typeof e.xsplit?e.xsplit:null;t===canal9&&(g=!0);var f="pintaKalturaPlayer('"+e.videoId+"', '"+m+"', '"+a+"', '"+r+"', '"+l+"', "+n+", '"+i+"', "+u+", '"+cleanTitle(c)+"', '"+p+"', "+g+")",v='<div id="'+m+'" class="player" onclick="'+f+'" style="width:'+d+"px;height:"+s+'px"><img src="'+p+'" width="'+d+'" height="'+s+'" /><span class="play-video"></span></div>',y='<div id="'+m+'" class="player" onclick="'+f+'" style="width:100%"><img src="'+p+'" width="100%" height="100%" /><span class="play-video"></span></div>';if(e.noWrite===!0)return v;if(document.write(o?y:v),o){var h=function(){var e=document.getElementById(m),t=e.offsetWidth,n=Math.ceil(9*t/16+30);e.style.height=n+"px"};setTimeout(h,1e3),window.addEventListener("resize",h)}return m}function pintaKalturaPlayer(e,t,n,i,a,r,l,o,d,s,u){function c(e,t,n,i,a,o,d,s,u){if(window.kWidget){window.mw&&window.kWidget.isIOS()&&(mw.setConfig("EmbedPlayer.EnableIpadHTMLControls",!0),mw.setConfig("EmbedPlayer.EnableIpadNativeFullscreen",!0));var c={targetId:t,entry_id:e,flashvars:{autoPlay:!0},params:{wmode:"transparent"},wid:"_"+r,uiconf_id:l};if(o){switch(n){case"yodona":case"happy-fm":var m="http://pubads.g.doubleclick.net/gampad/ads?sz=640x360&iu=/99071977/"+n+"/"+n+"_vc&ciu_szs&impl=s&cust_params=p%3Dpreroll%26t%3D"+i+"&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url=[referrer_url]&description_url=[description_url]&correlator=[timestamp]",g="http://pubads.g.doubleclick.net/gampad/ads?sz=640x360&iu=/99071977/"+n+"/"+n+"_vc_fin&ciu_szs&impl=s&cust_params=p%3Dpostroll%26t%3D"+i+"&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url=[referrer_url]&description_url=[description_url]&correlator=[timestamp]";break;default:var m="http://pubads.g.doubleclick.net/gampad/ads?sz=640x360&iu=/99071977/mun/"+n+"/"+n+"_vc&ciu_szs&impl=s&cust_params=p%3Dpreroll%26t%3D"+i+"&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url=[referrer_url]&description_url=[description_url]&correlator=[timestamp]",g="http://pubads.g.doubleclick.net/gampad/ads?sz=640x360&iu=/99071977/mun/"+n+"/"+n+"_vc_fin&ciu_szs&impl=s&cust_params=p%3Dpostroll%26t%3D"+i+"&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url=[referrer_url]&description_url=[description_url]&correlator=[timestamp]"}c.flashvars.doubleclick={plugin:!0,adTagUrlPre:m,adTagUrlPost:g,numPostroll:1,postSequence:1,numPreroll:1,preSequence:1,pauseAdOnClick:!1}}1==u&&(c.flashvars.akamaiHD={path:"http://v.uecdn.es/p/108/sp/10800/flash/kdp3/v3.7.5ue/plugins/akamaiHDPlugin.swf"}),p(document.getElementById(t),e,d),kWidget.embed(c)}}function p(e,t,n){var i=document.createElement("div");i.className="pixelcontabilizacion";var a=document.createElement("img");a.onload=function(){i.parentNode.removeChild(i)},a.width=a.height=1,a.src="http://anapixel.elmundo.es/banner.gif?campaign=zz_mmplayer06&group=mmplayer&page=mmplayer&creativity=contador&endpartialtimestamp=77359400&sign=1B32997E0F1532767BE1EFD838BFADAC&type=video-elmundo-"+t+"-"+cleanTitle(n)+"&rnd="+(new Date).getTime(),i.appendChild(a),e.parentNode.insertBefore(i,e.nextSibling)}if(window.kWidget)c(e,t,n,i,a,o,d,null,u);else{var m="http://"+kalturaServer+"/p/"+r+"/sp/"+r+"00/embedIframeJs/uiconf_id/"+l+"/partner_id/"+r;ueAjax.getJSONP(m,function(){c(e,t,n,i,a,o,d,s,u)})}}function cleanTitle(e){if(e){for(var t=["á","é","í","ó","ú","Á","É","Í","Ó","Ú","ñ","Ñ"," "],n=["a","e","i","o","u","A","E","I","O","U","n","N","-"],i=0,a=t.length;i<a;++i)e=e.replace(new RegExp(t[i],"g"),n[i]);return e.replace(/[^a-zA-Z0-9\._\-]/g,"")}}function cambiarEstado(e,t){for(var n=ueUtils.getElementsByClass(t),i=0;i<n.length;i++)ueUtils.removeClass(n[i],t);ueUtils.addClass(e,t)}var kalturaServer="k.uecdn.es",canal9="0_y5xzl1ln",ueMundoTv=window.ueMundoTv||function(){var e="kltrELMUNDO",t=1,n=9,i=!1,a=0,r="",l="",o=0,d="",s=null,u=null,c=null,p=null,m=null,g=null,f=null,v=null,y=null,I=null,k=null,b=null,E="kplayerIn",_="",w="",C=null,M=function(e){if(C=this,k=e.currentChannel?e.currentChannel:null,ueMundoTv.currentVideo=!!e.currentVideo&&e.currentVideo,!C.currentVideo)return!1;c=e.kchannelList?document.getElementById(e.kchannelList):document.getElementById("kchannelList"),p=e.kplaylist?document.getElementById(e.kplaylist):document.getElementById("kplaylist"),m=e.kplayer?document.getElementById(e.kplayer):document.getElementById("kplayer"),g=e.ktitle?document.getElementById(e.ktitle):document.getElementById("ktitle"),f=e.kdescription?document.getElementById(e.kdescription):document.getElementById("kdescription"),v=e.ktags?document.getElementById(e.ktags):document.getElementById("ktags"),y="string"==typeof e.imagen?e.imagen:"",I=e.btMore?document.getElementById(e.btMore):document.getElementById("btMore"),i=!!e.mobile&&e.mobile,cfg=e.cfg.split(","),section="string"==typeof e.seccion?e.seccion:"",topic="string"==typeof e.tema?e.tema:"",site="string"==typeof e.portal?e.portal:"",_="string"==typeof e.title?e.title:"",w="string"==typeof e.description?e.description:"",xsplit=ueMundoTv.currentVideo===canal9||null,publi=!0,I&&(I.style.display="none"),r=cfg[0],d=cfg[1],o=parseInt(cfg[3]),l=cfg[4],s=new KalturaConfiguration(o),s.serviceUrl="http://"+kalturaServer,u=new KalturaClient(s),i&&c&&(c.onchange=function(){C.loadChannel(this.value)}),c?B(C.loadChannelList):B();var t=m.innerWidth||m.clientWidth;h=m.innerHeight||m.clientHeight,m.innerHTML=kalturaPlayer({videoId:C.currentVideo,partnerId:o,uiconfId:d,noWrite:!0,objId:E,ancho:t,alto:h,seccion:section,tema:topic,portal:site,title:_,publi:publi,imagen:y,xsplit:xsplit}),g&&(g.innerHTML=_),f&&(f.innerHTML=w)},T=function(e){if(e!=C.loading){var t=document.getElementById("loading");e?(C.loading=!0,t||(t=document.createElement("div"),t.id="loading",t.className="precarga mostrar",c&&p.parentNode.appendChild(t)),t.display="block"):(C.loading=!1,t&&t.parentNode.removeChild(t))}},B=function(n){if(!C.loading){C.loading=!0;var i=ueUtils.readCookie(e);i?(u.setKs(i),C.loading=!1,n&&n()):u.session.start(function(i,a){!i||a.code&&a.message||(u.setKs(a),ueUtils.createCookie(e,a,t),C.loading=!1,n&&n())},r,l,KalturaSessionType.USER,o,24*t*3600,null)}},L=function(t){if(!C.apiLoading){C.apiLoading=!0;var n=new KalturaCategoryFilter;n.fullNameStartsWithIn="Canales>",n.orderBy=KalturaCategoryOrderBy.NAME_ASC,u.category.listAction(function(n,a){if(C.apiLoading=!1,n){if(a.code)return void("INVALID_KS"==a.code&&(u.setKs(null),ueUtils.removeCookie(e),B(t?null:function(){C.loadChannelList()})));var r=a.objects;r.length>0&&(null==k&&(k=r[0].id),i?P(r):K(r),C.loadChannel(k)),r=null}},n,null)}},x=function(e,t){for(var n=0,i=t.length;n<i;++n)if(t[n].id===e)return!0;return!1},K=function(e){for(var t=0,n=e.length;t<n;++t)if(!x(e[t].parentId,e)){var i=document.createElement("li"),a=document.createElement("a");a.href="javascript:void(0)",k==e[t].id&&(b=a,a.className="seleccionado"),a.channel=e[t].id,a.innerHTML=e[t].name,a.onclick=function(){return null!=b&&(b.className=""),b=this,this.className="seleccionado",C.loadChannel(this.channel),!1},i.appendChild(a),c&&c.appendChild(i)}i=a=null},P=function(e){if(c){c.innerHTML="";for(var t=0,n=e.length;t<n;++t)if(!x(e[t].parentId,e)){var i=document.createElement("option");i.text=e[t].name,i.value=e[t].id,k==e[t].id&&(i.selected=!0),c.add(i)}}},D=function(e,t){if(!C.loading){var t=t?t:1;if(!(e==C.currentChannel&&t<=C.currentPage)){T(!0);var i=new KalturaMediaEntryFilter;i.mediaTypeEqual=KalturaMediaType.VIDEO,i.status=KalturaEntryStatus.READY,i.categoryAncestorIdIn=e,i.orderBy=KalturaMediaEntryOrderBy.CREATED_AT_DESC;var r=new KalturaFilterPager;r.pageSize=n,r.pageIndex=t,u.media.listAction(function(n,i){if(!n||i.code&&i.message)return T(!1),void B();C.currentChannel=e,C.currentPage=t,1==t&&(a=0,c&&(p.innerHTML=""));var r=i.objects,l=r.length;if(l&&0!=l){c&&(p.nVideos=l);for(var o=0,d=r.length;o<d;++o){var s=document.createElement("li"),u=document.createElement("a"),m=document.createElement("img"),g=document.createElement("span"),f=r[o].thumbnailUrl,v=r[o].name;v=v.replace(/_/gi,"&#8203; "),u.kaltura={title:v,description:r[o].description,entryId:r[o].id,tags:r[o].tags},u.href="javascript:void(0)",u.onclick=function(){return this.kaltura&&A(this.kaltura),cambiarEstado(this.parentNode,"activo"),!1},m.setAttribute("width","147"),m.src=f,m.setAttribute("title",v),m.setAttribute("alt",v),m.height>0?m.onload=function(){c&&(p.nVideos--,0==p.nVideos&&T(!1))}:T(!1),g.innerHTML=v,u.appendChild(m),u.appendChild(g),s.appendChild(u),c&&p.appendChild(s)}}else T(!1);a+=r.length,I&&(I.style.display=a<i.totalCount?"block":"none"),r=o=d=null},i,r)}}},N=function(t,n,i,a){if(!C.loading){if(C.loading=!0,"videofile"==n)var r="media";else if("livestreamfile"==n)var r="liveStream";u[r].get(function(t,r){if(C.loading=!1,t)return r.code?void("INVALID_KS"==r.code&&(u.setKs(null),ueUtils.removeCookie(e),B())):void A({title:"livestreamfile"==n&&void 0!=i?i:r.name,description:"livestreamfile"==n&&void 0!=a?a:r.description,entryId:r.id,tags:r.tags})},t,null)}},A=function(e){if(e.entryId===canal9?xsplit=!0:xsplit=null,e.entryId!=C.currentVideo)if(window.kdp){C.currentVideo=e.entryId,kWidget.destroy(E),m.innerHTML='<div id="'+E+'" style="width:100%;height:100%"></div>',pintaKalturaPlayer(e.entryId,E,section,topic,site,o,d,publi,e.title,y,xsplit);var t=[];if(e.tags)for(var n=e.tags.split(", "),i=0,a=n.length;i<a;++i)t.push('<li><a href="" rel="tag">'+n[i]+"</a></li>");g&&(g.innerHTML=e.title),f&&(f.innerHTML=e.description),v&&(v.innerHTML=t.join(""))}else C.currentVideo=e.entryId,pintaKalturaPlayer(e.entryId,E,section,topic,site,o,d,publi,e.title,y,xsplit),g&&(g.innerHTML=e.title),f&&(f.innerHTML=e.description),v&&(v.innerHTML=t.join(""));window.scrollTo(0,0)},H=function(){C.currentChannel&&C.loadChannel(C.currentChannel,C.currentPage+1)};return{currentChannel:null,currentPage:1,currentVideo:null,loading:!1,apiLoading:!1,init:M,loadChannelList:L,loadChannel:D,playVideo:N,loadChannelMore:H}}();