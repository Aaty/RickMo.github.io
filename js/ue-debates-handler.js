function ueDebate(e){if(e){var t=this,s="string"==typeof e.site&&e.site,r="string"==typeof e.url&&e.url,a="number"==typeof e.oracleId&&e.oracleId,o=!("string"!=typeof e.formId||!document.getElementById(e.formId))&&document.getElementById(e.formId),n=!("string"!=typeof e.btEnviar||!document.getElementById(e.btEnviar))&&document.getElementById(e.btEnviar),l=!("string"!=typeof e.errorId||!document.getElementById(e.errorId))&&document.getElementById(e.errorId),i="string"==typeof e.redirect&&e.redirect,d=!1;0!=r&&0!=s&&0!=a&&0!=o&&0!=n&&(this.showErrorMessages=function(e){if(l){jQuery(l).removeClass("n-visible"),jQuery(l).html('<div class="alert-box warning"><p>'+e+'</p><span class="close"></span></div>');var t=jQuery(l).find(".close");t.on("click",function(){jQuery(l).html(""),jQuery(l).addClass("n-visible")})}},this.sendVotes=function(e){var r={};r.site=s,r.id=a.toString(),r.preguntas=[],l&&(l.innerHTML="");var n=parseInt(document.getElementById("anio_debate_"+a).value,10),i=parseInt(document.getElementById("mes_debate_"+a).value,10);r.anio=n,r.mes=i;var d=!0;fields=o.getElementsByTagName("fieldset");for(var u=0,c=fields.length;u<c;++u){var g=!0,f=fields[u].getElementsByTagName("input"),m=fields[u].getElementsByTagName("select");if(m.length>0){for(var p=0,v=m[0].options.length;p<v;++p)if(1==m[0].options[p].selected){var y=m[0].options[p].value.split(",");r.preguntas.push({id:y[0],respuesta_id:y[1]}),g=!1}}else if(f.length>0)for(var p=0,v=f.length;p<v;++p)if(("checkbox"==f[p].type||"radio"==f[p].type)&&1==f[p].checked){var y=f[p].value.split(",");r.preguntas.push({id:y[0],respuesta_id:y[1]}),g=!1}fields[u].className=g?"error":"",g&&(d=!1)}d?this.sendData(r):t.showErrorMessages("Error rellenando votaciÃ³n, revisa los campos")},this.sendData=function(e){if(!d){d=!0;var s=r+"?jsonDebate="+JSON.stringify(e);ueAjax.getRequest(s,"json",function(e){d=!1,0==parseInt(e.codigo)?t.showErrorMessages(e.resultado):i&&(window.location.href=i)})}},ueUtils.addEvent(n,"click",function(){t.sendVotes(o)},!1))}}function cargar_resultados_debates(){if("undefined"!=typeof debateTotalResults&&void 0!=debateTotalResults.resultados){var e=!!document.getElementById("numVotosTotalesEncuesta")&&document.getElementById("numVotosTotalesEncuesta");e&&(e.innerHTML=debateTotalResults.total_votos?debateTotalResults.total_votos:"");for(var t=0,s=debateTotalResults.resultados.length;t<s;++t){for(var r=debateTotalResults.resultados[t],a=[],o=0,n=r.respuestas.length;o<n;++o)try{var l=r.respuestas[o],i=100*l.votos/r.total_votos;a[o]=i.toFixed(2)}catch(d){}for(var o=0,n=r.respuestas.length;o<n;++o)try{var u=document.getElementById("poll-percentage_"+r.respuestas[o].id),c=document.getElementById("bar-percentage_"+r.respuestas[o].id);c.setAttribute("style","width:"+a[o]+"%"),u.innerHTML=a[o]+" %"}catch(d){}}}}