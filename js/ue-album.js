var ueAlbum=function(e){function t(){var t=document.title.indexOf("|"),a="",l="";if(t!=-1&&(a=document.title.substring(0,t),l=document.title.substring(t)),document.title=a+l,e.al_idPaginator){P=new ueCarrusel({idCont:e.al_idPaginator,buttons:[!0,!1,!1,!0],idPreview:e.al_idPreview}),w=document.getElementById(e.al_idPaginator).getElementsByTagName("li")[2].getElementsByTagName("a");for(var s=0,n=w.length;s<n;++s)w[s].idx=s+1,w[s].className="",ueUtils.addEvent(w[s],"click",function(e){h.goTo(this.idx),ueUtils.preventDefault(e)},!1);var i=ueUtils.getElementsByClass("anterior",document.getElementById(P.idCont))[0];ueUtils.addEvent(i,"click",function(e){h.previous(),ueUtils.preventDefault(e)},!1);var o=ueUtils.getElementsByClass("siguiente",document.getElementById(P.idCont))[0];ueUtils.addEvent(o,"click",function(e){h.next(),ueUtils.preventDefault(e)},!1),P.goTo(h.actual),D=w[h.actual-1],ueUtils.addClass(D,"seleccionado")}if(e.al_idThumbnails){H=new ueCarrusel({idCont:e.al_idThumbnails,rows:e.al_rows,columns:e.al_columns}),A=ueUtils.getElementsByClass("envuelve-listado",document.getElementById(e.al_idThumbnails))[0].getElementsByTagName("a");for(var s=0,n=A.length;s<n;++s)A[s].idx=s+1,A[s].className="",ueUtils.addEvent(A[s],"click",function(e){h.goTo(this.idx),ueUtils.preventDefault(e)},!1);H.goTo(h.actual),L=A[h.actual-1],ueUtils.addClass(L,"seleccionado")}h.next=u}function a(e){try{h.callback(M[e-1]),B.alt=M[e-1].description,ueUtils.addClass(T,"mostrar"),ueUtils.addClass(B,"ocultar"),ueUtils.addClass(I,"ocultar"),ueUtils.addClass(N,"ocultar"),x.innerHTML=e+" / <span>"+h.nItems+"</span>";var t="";M[e-1].author&&(t+="<strong>"+M[e-1].author+"</strong>"),t+=M[e-1].distributor?M[e-1].distributor:"",divAuthorChange=ueUtils.getElementsByClass("autor",I),divAuthorChange[0].innerHTML=t,k.innerHTML='<p itemprop="description">'+M[e-1].footer+"</p>",H&&H.goTo(e),P&&P.goTo(e),B.src=M[e-1].image}catch(a){}}function l(){return $=!0,!!z&&(ueUtils.addClass(T,"mostrar"),z.style.display="block",z&&m()?(ueUtils.removeClass(T,"mostrar"),ueUtils.addClass(B,"ocultar"),h.next=o,$=!0,!0):(ueUtils.removeClass(T,"mostrar"),z.style.display="none",$=!1,!1))}function n(){if(V)return d(),!1;if(++S==G){S=0,V=!0,q.style.display="block",ueUtils.addClass(B,"ocultar"),h.next=r,q.getElementsByTagName("div")[0].innerHTML="prueba de publicidad";try{LOADING_PUBLI_FLAG===!1&&albumPubliHandler.loadDefaultPubli()}catch(e){return!1}return!0}return!1}function i(){R=!0;var e=h.actual;h.actual=h.actual<h.nItems?h.actual+1:1,J&&J(e,h.actual),void 0==googletag&&null==googletag||googletag.pubads().refresh(),a(h.actual)}function u(){if(!R&&!$){if(h.actual==h.nItems){if(z&&l())return}else if(G&&n())return;i()}}function o(){g(),G&&n()||(h.next=u,i())}function r(){d(),i()}function d(){V=!1,h.next=u,ueUtils.removeClass(B,"ocultar"),q.style.display="none"}function c(e){var t={};if(1==e.nodeType&&e.attributes.length>0){t["@attributes"]={};for(var a=0;a<e.attributes.length;a++){var l=e.attributes.item(a);t["@attributes"][l.nodeName]=l.nodeValue}}if(e.hasChildNodes())for(var s=0;s<e.childNodes.length;s++){var n=e.childNodes.item(s);if(3!=n.nodeType&&4!=n.nodeType){var i=n.nodeName;"undefined"==typeof t[i]&&(t[i]=[]),t[i].push(c(n))}else n.nodeValue.trim()&&(t["#data"]?t["#data"]+=n.nodeValue.trim():t["#data"]=n.nodeValue.trim())}return t}function m(e){try{var t=c(ueAjax.getRequest(K[1]+".related.xml")),a=t.related[0].album,l=[]}catch(s){return!1}if(a&&a.length>0){z.innerHTML="",l.push("<h1>&Aacute;lbumes relacionados</h1>"),l.push("<ul>");for(var n=0,i=a.length<6?a.length:6;n<i;++n)l.push('<li><a href="'+a[n].link[0]["#data"]+'"><img src='+a[n].image[0]["#data"]+' width="220" heigth="147"><span>'+a[n].title[0]["#data"]+"</span></a></li>");return l.push("</ul>"),z.innerHTML=l.join(""),ueUtils.removeClass(D,"seleccionado"),ueUtils.removeClass(L,"seleccionado"),!0}return!1}function g(){$=!1,z.style.display="none"}function f(){return!("undefined"==typeof s||!s)&&(s.events="",void s.t(),!0)}function v(){var e=ueUtils.getElementsByClass("pixelcontabilizacion",document,"div")[0];if(!e)return!1;for(var t=e.getElementsByTagName("img"),a=0,l=t.length;a<l;++a)void 0==t[a].srcAux&&(t[a].srcAux=t[a].src),t[a].src=t[a].srcAux+"&np="+(new Date).getTime();return!0}function p(e){h.next(),ueUtils.preventDefault(e)}var h=this,U=e.al_idCont,y=document.getElementById(U),C=e.al_first,b=ueUtils.getElementsByClass("anterior",y)[0],E=ueUtils.getElementsByClass("siguiente",y)[0],_=ueUtils.getElementsByClass("foto",y)[0],B=_.getElementsByTagName("img")[0],T=ueUtils.getElementsByClass("precarga",y)[0],x=ueUtils.getElementsByClass("contador",y)[0],I=ueUtils.getElementsByClass("pie",y)[0],k=document.getElementById("album1-pie"),N=document.getElementById(e.al_idFooter),w=[],A=[],D=null,L=null,P=null,H=null,M=e.al_data,j="undefined"!=typeof e.al_reloadOmniture&&e.al_reloadOmniture,O="undefined"!=typeof e.al_reloadPixels&&e.al_reloadPixels,V=!1,F="number"==typeof e.al_publiHash&&e.al_publiHash,G="number"==typeof e.al_publiCounter&&(F?e.al_publiCounter:3),S=0,q=ueUtils.getElementsByClass("publicidad-album")[0],z=!!document.getElementById(U+"-relacionados")&&document.getElementById(U+"-relacionados"),R=!1,$=!1,J=!1,K=[];/ipad|iphone|android/.test(navigator.userAgent.toLowerCase());this.actual=e.al_first?e.al_first:1,this.callback="function"==typeof e.al_callback&&e.al_callback,this.nItems=M.length,K=location.pathname.match(/\/([a-f0-9]*?)(_\d{1,3})?\.html$/),K&&history.pushState&&(J=function(e,t){nextUrl=K[1]+(t>1?"_"+(t-1):"")+".html",history.pushState({pos:t},document.title,nextUrl)}),this.goTo=function(e,t){if(!R&&!$&&!(e==h.actual||e<1||e>h.nItems||G&&n())){R=!0;var l=h.actual;h.actual=e,J&&t!==!1&&J(l,h.actual),void 0==googletag&&null==googletag||googletag.pubads().refresh(),a(h.actual)}},this.previous=function(){if(!(R||$||G&&n())){R=!0;var e=h.actual;h.actual=h.actual>1?h.actual-1:h.nItems,J&&J(e,h.actual),void 0==googletag&&null==googletag||googletag.pubads().refresh(),a(h.actual)}},ueUtils.addEvent(B,"load",function(){if(R!==!1)try{R=!1,ueUtils.removeClass(T,"mostrar"),ueUtils.removeClass(B,"ocultar"),ueUtils.removeClass(T,"seleccionado"),ueUtils.removeClass(I,"ocultar"),ueUtils.removeClass(N,"ocultar"),H&&(ueUtils.removeClass(L,"seleccionado"),L=A[h.actual-1],ueUtils.addClass(L,"seleccionado")),P&&(ueUtils.removeClass(D,"seleccionado"),D=w[h.actual-1],ueUtils.addClass(D,"seleccionado")),j&&f(h.actual),O&&v()}catch(e){}},!1),J&&ueUtils.addEvent(window,"popstate",function(e){h.goTo(e.state?e.state.pos:C,!1)},!1),b.href="javascript:void(0)",ueUtils.addEvent(b,"click",function(e){h.previous(),ueUtils.preventDefault(e)},!1),E.href="javascript:void(0)",ueUtils.addEvent(E,"click",p,!1),B.parentNode.href="javascript:void(0)",ueUtils.addEvent(B.parentNode,"click",p,!1),ueUtils.addEvent(document,"keyup",function(e){var t=e.keyCode;37==t&&h.previous(),39==t&&h.next(),ueUtils.preventDefault(e)},!1),ueUtils.addEvent(y,"swiperight",function(){h.previous()},!1),ueUtils.addEvent(y,"swipeleft",function(){h.next()},!1),t()};